  kind: DaemonSet

  config:
    inputs: |
      [INPUT]
          Name tail
          Path /var/log/containers/*.log
          multiline.parser docker, cri
          Tag kube.*
          Mem_Buf_Limit 100MB
          Skip_Long_Lines On
    outputs: |
      [OUTPUT]
          Name es
          Match kube.*
          Host elasticsearch-master
          Logstash_Format On
          Retry_Limit False
          Trace_Error       On
          Trace_Output      On
      [OUTPUT]
          name                  azure_blob
          match                 *
          account_name          kubernetesstorage25
          shared_key            {{ .Values.shared-key }}
          path                  kubernetes
          container_name        logs
          auto_create_container off
          tls                   on
